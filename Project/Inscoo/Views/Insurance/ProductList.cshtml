@model IEnumerable<Models.Insurance.ProductListModel>

<div class="describe_name">保障利益</div>
<table class="inscoo-productTable">
    <tr>
        <th style="width:8%;">
            @*  *@
        </th>
        <th style="width:35%;">
            @Html.DisplayNameFor(model => model.SafeguardName)
        </th>
        <th style="width:20%;">
            @Html.DisplayNameFor(model => model.CoverageSum)
        </th>
        <th style="width:22%;">
            @Html.DisplayNameFor(model => model.PayoutRatio)
        </th>
        <th style="width:15%;">
            @Html.DisplayNameFor(model => model.Price)
        </th>
    </tr>
    @{
        if (Model != null)
        {
            var i = 1;
            var pcount = Model.Count();
            foreach (var item in Model.OrderBy(a => a.SafeguardCode))
            {
                <tr>
                    <td rowspan="2">
                        @{
                            var checkName = "check_" + item.InsuredCom + "_" + i;
                            var coveName = "CoverageSum_" + item.InsuredCom + "_" + i;
                            var payratName = "PayoutRatio" + item.InsuredCom + "_" + i;
                            var priceName = "price" + item.InsuredCom + "_" + i;
                            var idname = "id" + item.InsuredCom + "_" + i;
                            var onchangeFun = "getPriceAndIds(c='" + item.InsuredCom + "',e=" + i + ")";

                            if (item.SafeguardName.Contains("人身意外保险") || item.SafeguardName.Contains("死亡伤残责任"))
                            {
                                <input type="checkbox" checked="checked" disabled="disabled" class="check_product" name=@checkName id=@checkName value=@item.SafeguardCode onchange=@Html.Raw(onchangeFun) />
                            }
                            else
                            {
                                <input type="checkbox" name=@checkName id=@checkName class="check_product" value=@item.SafeguardCode onchange=@Html.Raw(onchangeFun) />
                            }
                        }
                    </td>
                    <td>
                        <span class="toggle_color show_color"></span>
                        @Html.DisplayFor(modelItem => item.SafeguardName)
                    </td>
                    <td>
                        @Html.DropDownList(coveName, item.CoverageSumList, new { onchange = Html.Raw(onchangeFun) })
                    </td>
                    <td>
                        @if (item.PayoutRatioList.Count > 0)
                    {
                            @Html.DropDownList(payratName, item.PayoutRatioList, new { onchange = Html.Raw(onchangeFun) })
                        }
                    </td>
                    <td>
                        <b id=@priceName name=@priceName>0.00</b>
                        <input type="hidden" id=@idname value="0" />
                    </td>
                </tr>
                <tr>
                    <td colspan="4" class="hideDeclare" style="text-align:left">
                        @*<span>被保险人遭受意外伤害，并自意外伤害发生之日起180日内因该意外伤害身故的，保险人按保险金额给付身故保险金.被保险人遭受意外伤害，并自意外伤害发生之日起180日内因该意外伤害身故的，保险人按保险金额给付身故保险金.</span>&nbsp;&nbsp;
                            <a class="">请查看保险条款</a>*@
                        <span>@item.ProdMemo</span>&nbsp;&nbsp;
                        @if (!string.IsNullOrEmpty(item.ProvisionPath))
                        {
                            <a href="@item.ProvisionPath" target="_blank">请查看保险条款</a>
                        }
                    </td>
                </tr>
                                    i++;
                                }
                            } }
</table>

@{
    var totalName = "";
    if (Model != null)
    {
        totalName = "total_" + Model.FirstOrDefault().InsuredCom;
    }
    <div class="customProduct_purchase">
        <ul class="customProduct_purchaseul">
            <li>
                总保费：<b id=@totalName>0.00</b>
            </li>
            <li>
                @if (Model != null)
                {
                    @Html.Action("Cart", new { company = Model.FirstOrDefault().InsuredCom })
                }
            </li>
            <li style="text-align:left;">
                <a href="http://www.inscoo.com/Archive/InsuranceFiles/A0.pdf" target="_blank">职业类别分类</a>
            </li>
        </ul>
    </div>
}